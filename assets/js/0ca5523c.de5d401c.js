"use strict";(self.webpackChunknodality=self.webpackChunknodality||[]).push([[4117],{2051:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"guides/transitions","title":"Transitions","description":"This library supports the CSS View Transition API to enable smooth animations when navigating between pages.\\\\","source":"@site/docs/guides/transitions.md","sourceDirName":"guides","slug":"/guides/transitions","permalink":"/docs/guides/transitions","draft":false,"unlisted":false,"editUrl":"https://github.com/nodalityjs/docs/edit/main/docs/guides/transitions.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Testing","permalink":"/docs/guides/testing"},"next":{"title":"Deploy","permalink":"/docs/guides/deploy"}}');var s=i(4848),a=i(8453);const r={},l="Transitions",o={},d=[{value:"Step 1",id:"step-1",level:2},{value:"Step 1 -- Define the card component (<code>index.html</code>)",id:"step-1----define-the-card-component-indexhtml",level:2},{value:"Step 3 - Use detail.js",id:"step-3---use-detailjs",level:3},{value:"Key Notes",id:"key-notes",level:3}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"transitions",children:"Transitions"})}),"\n",(0,s.jsxs)(n.p,{children:["This library supports the ",(0,s.jsx)(n.strong,{children:"CSS View Transition API"})," to enable smooth animations when navigating between pages.",(0,s.jsx)(n.br,{}),"\n","For example, you can build a carousel where each card smoothly transitions into a detailed view."]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["The View Transition API is available in every modern browser with the exception of Firefox.\nSee ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/View_Transition_API#browser_compatibility",children:"here"})," for browser compatibility."]})}),"\n",(0,s.jsxs)(n.admonition,{type:"warning",children:[(0,s.jsx)(n.p,{children:"The View Transition API does not work well when developing using web server. For better experience open your app in the browser with CORS disabled. Example for Chrome:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'open -n -a /Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome --args --user-data-dir="/tmp/chrome_dev_test" --disable-web-security\n'})})]}),"\n",(0,s.jsx)(n.h2,{id:"step-1",children:"Step 1"}),"\n",(0,s.jsxs)(n.h2,{id:"step-1----define-the-card-component-indexhtml",children:["Step 1 -- Define the card component (",(0,s.jsx)(n.code,{children:"index.html"}),")"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Set up the environment"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Add the ",(0,s.jsx)(n.code,{children:"meta"})," tag with ",(0,s.jsx)(n.code,{children:"view-transition"})," set to ",(0,s.jsx)(n.code,{children:"same-origin"}),".\\"]}),"\n",(0,s.jsxs)(n.li,{children:["Declare ",(0,s.jsx)(n.code,{children:"@view-transition { navigation: auto; }"})," in your CSS.\nThis enables automatic page navigation transitions."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Create a card"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"vtn"})," attribute is shorthand for ",(0,s.jsx)(n.code,{children:"view-transition-name"}),".\\"]}),"\n",(0,s.jsxs)(n.li,{children:["A matching ",(0,s.jsx)(n.code,{children:"vtn"})," value must exist both in the ",(0,s.jsx)(n.strong,{children:"parent view\n(index.html)"})," and in the ",(0,s.jsx)(n.strong,{children:"child view (detail page)"})," for the\ntransition to animate correctly."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Use the ",(0,s.jsx)(n.code,{children:"HScroller"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"HScroller"})," class is used to build a horizontally scrolling\ncard carousel.\\"]}),"\n",(0,s.jsxs)(n.li,{children:["Configure scrolling speed using ",(0,s.jsx)(n.code,{children:".seto({ speed })"})," (higher\nvalues = slower scrolling).\\"]}),"\n",(0,s.jsxs)(n.li,{children:["Add multiple card instances with ",(0,s.jsx)(n.code,{children:".add([...])"}),". Each card should\nhave a unique identifier (",(0,s.jsx)(n.code,{children:"id"})," or ",(0,s.jsx)(n.code,{children:"textChild"}),") to ensure smooth\ntransitions."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<meta charset="UTF-8">\n<meta name="view-transition" content="same-origin">\n<script type="module" src="lib.bundle.js"><\/script>\n\n<style>\n    body {\n        background: gray;\n        overflow: hidden;\n        margin: 0;\n        padding: 0;\n    }\n\n@view-transition { \n    navigation: auto;\n}\n</style>\n\n<div id="mount"></div>\n\n\n<script type="module">\n\n  // Define Card class\nclass Card {\n    constructor(obj){\n        this.id = obj.id;\n        this.child = obj.child;\n        this.url = obj.url;\n        this.textChild = obj.textChild;\n        this.icon = obj.icon;\n    }\n\n    render(){\n        return new Wrapper({ isLink: true, child: this.child })\n            .set({\n                id: this.id,\n                child: this.child,\n                class: this.id + "o",\n                font: "Arial"\n            })\n            .add([\n\n             \n                new Image(\n                    this.url)\n                    .set({\n                        width: "400px",\n                        height: "300px",\n                        objectFit: "cover",\n                       \n                        class: this.id,\n                        vtn: this.textChild + "img"\n                    })\n            ]); \n       \n    }\n}\n\n\n// Initialize HScroller and add a card\n    new HScroller()\n    .seto({\n        speed: 1.0 // the bigger the slower\n    })\n    .add([\n         new Card({\n            child: "child-A.html",\n            textChild: "icon",\n            icon: "child-A-icon",\n            url: "https://media.cnn.com/api/v1/images/stellar/prod/ap24002766263400.jpg?c=original",\n        }).render()\n    ])\n    .render("#mount");\n\n <\/script>\n'})}),"\n",(0,s.jsxs)(n.h1,{id:"step-2-create-the-detail-view-child-ahtml",children:["Step 2 Create the detail view (",(0,s.jsx)(n.code,{children:"child-A.html"}),")"]}),"\n",(0,s.jsx)(n.p,{children:"The detail page is where the user is taken after clicking on a card.\\"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'\n<script>\n  <meta name="view-transition" content="same-origin">\n\n<body></body>\n\n<style>\n  body {\n      background: gray;\n      margin: 0;\n      padding: 0;\n  }\n\n  @view-transition {\n  navigation: auto;\n}\n\n</style>\n\n<script type="module" src="lib.bundle.js"><\/script>\n<script type = "module" src="detail.js"><\/script>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"step-3---use-detailjs",children:"Step 3 - Use detail.js"}),"\n",(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.code,{children:"detail.js"}),", you can:\\"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Render a title, text, and images.\\"}),"\n",(0,s.jsx)(n.li,{children:"Animate elements (e.g., header text sliding in).\\"}),"\n",(0,s.jsx)(n.li,{children:"Provide navigation back to the index page (e.g., with a back arrow).\\"}),"\n",(0,s.jsxs)(n.li,{children:["Use the same ",(0,s.jsx)(n.code,{children:"vtn"})," value (",(0,s.jsx)(n.code,{children:"iconimg"}),") for the image to link the\ntransition between ",(0,s.jsx)(n.strong,{children:"index.html"})," and ",(0,s.jsx)(n.strong,{children:"child-A.html"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The code already:\\"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Creates a heading and animates it.\\"}),"\n",(0,s.jsxs)(n.li,{children:["Adds a back button (",(0,s.jsx)(n.code,{children:'Link("Hello", "index.html")'}),").\\"]}),"\n",(0,s.jsxs)(n.li,{children:["Renders the same image with the same ",(0,s.jsx)(n.code,{children:"vtn"})," name.\\"]}),"\n",(0,s.jsx)(n.li,{children:"Appends multiple paragraphs of text to simulate a content-rich detail\nview."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'\n\nlet r = new Center().items(\n    [\n        new Text("Best ship")\n            .set({\n                font: "Arial",\n                clampc: "S1",\n                em: 4.2,\n                color: "white",\n                weight: "bold",\n                removeDecoration: true,\n                id: "header",\n                arrayMargin: { sides: ["top"], value: "7rem" },\n            })\n    ]\n)\n\nlet ropo = document.createElement("a");\nropo.setAttribute("href", "index");\n\nlet l = new Link("Hello", "index.html").set({\n    link: "index.html",\n    data: {\n        options: {\n            url: "index.html",\n            img: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b1/Back_Arrow.svg/2048px-Back_Arrow.svg.png",\n            size: "70px",\n            radius: "0.1rem"\n        }\n    },\n\n});\n\nlet flex = new FlexRow().items([\n    l,\n    new Spacer(true),\n]);\n\nlet ela = flex.render();\nela.style.marginTop = "1rem";\ndocument.body.appendChild(ela);\n\n\nlet el = r.render();\n\ndocument.body.appendChild(el);\ndocument.querySelector("#header").style.transform = "translateY(200px)";\ndocument.querySelector("#header").animate([\n    { opacity: "1", opacity: "0" },\n    { transform: "translateY(200px)", transform: "translateY(0px)", },\n\n], {\n    duration: 800,\n    fill: \'forwards\'\n});\n\n\nlet a = document.createElement(\'a\');\na.href = \'index.html\';\n\nlet e = new Image("https://media.cnn.com/api/v1/images/stellar/prod/ap24002766263400.jpg?c=original", \'exact\').set({\n    url: \'https://media.cnn.com/api/v1/images/stellar/prod/ap24002766263400.jpg?c=original\',\n    class: "img-small",\n    width: "900px",\n    height: "600px",\n\n    arrayMargin: { sides: ["top"], value: "7rem" },\n    vtn: "iconimg"\n});\n\nlet ra = new Center().items(\n    [\n        e\n    ]);\n\n\n\nlet tz = ra.render();\n\na.appendChild(tz);\ndocument.body.appendChild(a);\n\n\nlet paragraph = new Text("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam a maximus massa. Nam at egestas ante, vitae posuere turpis. Suspendisse non metus sagittis, tristique sem id, pellentesque urna. Phasellus tempus quam at tellus suscipit, non maximus leo euismod. Nunc quis facilisis turpis. Donec tristique vel felis eu finibus. Maecenas malesuada rutrum est pulvinar dapibus. Praesent eu sem condimentum, posuere turpis sit amet, mollis libero. Praesent nulla nibh, sagittis sed justo ut, facilisis malesuada odio.")\n    .set({\n        font: "Arial",\n        clampc: "S1",\n        em: 1.2, color: "white",\n        weight: "bold",\n        removeDecoration: true,\n        id: "header",\n        arrayMargin: { sides: ["left", "right"], value: "auto" },\n        width: "50%",\n        arrpad: { sides: ["bottom", "top"], value: "2.6rem" }\n    });\n\ndocument.body.appendChild(paragraph.render());\n\nlet paragraphB = new Text("Interdum et malesuada fames ac ante ipsum primis in faucibus. Aliquam vulputate nunc a turpis tristique vestibulum. Aliquam pretium aliquam risus, ac laoreet eros ullamcorper et. Maecenas elementum libero vestibulum cursus fringilla. Sed facilisis, nibh et convallis pharetra, eros nisl placerat risus, eget varius magna arcu sit amet dui. Pellentesque consectetur nulla sit amet arcu tristique varius. Nullam at elit sit amet lectus cursus tempus vel et ligula. Pellentesque a tincidunt felis, vitae semper enim. Integer luctus nunc nec elementum dignissim. Nam aliquet euismod quam, non pellentesque arcu tristique porta.")\n    .set({\n        font: "Arial",\n        clampc: "S1",\n        em: 1.2, color: "white",\n        weight: "bold",\n        removeDecoration: true,\n        id: "header",\n        width: "50%",\n        arrayMargin: { sides: ["left", "right"], value: "auto" },\n        arrpad: { sides: ["bottom"], value: "2.6rem" }\n    });\n\n\nlet paragraphC = new Text("Nullam a ornare eros, a vestibulum nulla. Aenean cursus dui pharetra, pellentesque leo eu, euismod tortor. Curabitur tempor mollis lorem, in dignissim nisl convallis at. Etiam dictum, ex eu tempus varius, massa purus malesuada ipsum, elementum aliquet sem quam ut ante. Quisque sed facilisis lacus. Curabitur aliquet egestas nisl sit amet malesuada. Cras vitae finibus ligula, vitae vestibulum magna. Cras molestie ac elit eu aliquam. Phasellus posuere sit amet tellus ut mattis. Quisque blandit at lacus at hendrerit.")\n    .set({\n        font: "Arial",\n        clampc: "S1",\n        em: 1.2, color: "white",\n        weight: "bold",\n        removeDecoration: true,\n        id: "header",\n        width: "50%",\n        arrayMargin: { sides: ["left", "right"], value: "auto" },\n    });\n\ndocument.body.appendChild(paragraph.render());\ndocument.body.appendChild(paragraphB.render());\ndocument.body.appendChild(paragraphC.render());\n'})}),"\n",(0,s.jsx)(n.h3,{id:"key-notes",children:"Key Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.code,{children:"vtn"})," consistency"]}),": The ",(0,s.jsx)(n.code,{children:"vtn"})," attribute (shorthand for\n",(0,s.jsx)(n.code,{children:"view-transition-name"}),") must match between the originating element\nand its target for the transition to animate properly.\\"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Navigation"}),": The ",(0,s.jsx)(n.code,{children:"@view-transition { navigation: auto; }"})," CSS\nrule makes browser navigation (",(0,s.jsx)(n.code,{children:'a href="..."'}),") eligible for\ntransitions.\\"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Fallback"}),": In browsers without View Transition API (e.g.,\nFirefox), navigation will still work, but without smooth\ntransitions.\\"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Customization"}),": You can add animations (e.g.,\n",(0,s.jsx)(n.code,{children:".animate([...], { duration })"}),") for fine-grained control of how\nelements enter or leave the page."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var t=i(6540);const s={},a=t.createContext(s);function r(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);